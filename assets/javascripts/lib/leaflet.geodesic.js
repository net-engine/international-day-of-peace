(function(){function e(e,t){return e.extend({initialize:function(n,r){e.prototype.initialize.call(this,L.geodesicConvertLines(n,t),r),this._latlngsinit=this._convertLatLngs(n)},getLatLngs:function(){return this._latlngsinit},setLatLngs:function(e){return this._latlngsinit=this._convertLatLngs(e),this._latlngs=this._convertLatLngs(L.geodesicConvertLines(this._latlngsinit,t)),this.redraw()},addLatLng:function(e){return this._latlngsinit.push(L.latLng(e)),this._latlngs=this._convertLatLngs(L.geodesicConvertLines(this._latlngsinit,t)),this.redraw()},spliceLatLngs:function(){var e=[].splice.apply(this._latlngsinit,arguments);return this._convertLatLngs(this._latlngsinit),this._latlngs=this._convertLatLngs(L.geodesicConvertLines(this._latlngsinit,t)),this.redraw(),e}})}function t(e,t,n){var r,i=6378137,s=5e3,o=L.LatLng.DEG_TO_RAD,u=L.LatLng.RAD_TO_DEG,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S;h=Math.abs(t.lng-e.lng)*o,a=e.lat*o,f=t.lat*o,l=e.lng*o,c=t.lng*o,p=Math.atan2(Math.sqrt(Math.pow(Math.cos(f)*Math.sin(h),2)+Math.pow(Math.cos(a)*Math.sin(f)-Math.sin(a)*Math.cos(f)*Math.cos(h),2)),Math.sin(a)*Math.sin(f)+Math.cos(a)*Math.cos(f)*Math.cos(h)),d=Math.ceil(p*i/s);for(r=1;r<=d;r++)v=r/d,m=Math.sin((1-v)*p)/Math.sin(p),g=Math.sin(v*p)/Math.sin(p),y=m*Math.cos(a)*Math.cos(l)+g*Math.cos(f)*Math.cos(c),b=m*Math.cos(a)*Math.sin(l)+g*Math.cos(f)*Math.sin(c),w=m*Math.sin(a)+g*Math.sin(f),E=u*Math.atan2(w,Math.sqrt(Math.pow(y,2)+Math.pow(b,2))),S=u*Math.atan2(b,y),n.push(L.latLng([E,S]))}L.geodesicConvertLines=function(e,n){var r,i,s,o=[];for(r=0,s=e.length;r<s;r++){if(L.Util.isArray(e[r])&&typeof e[r][0]!="number")return;e[r]=L.latLng(e[r])}n||o.push(e[0]);for(r=0,s=e.length-1;r<s;r++)t(e[r],e[r+1],o);return n&&t(e[s],e[0],o),o},L.GeodesicPolyline=e(L.Polyline,0),L.GeodesicPolygon=e(L.Polygon,1),L.geodesicPolyline=function(e,t){return new L.GeodesicPolyline(e,t)},L.geodesicPolygon=function(e,t){return new L.GeodesicPolygon(e,t)}})();